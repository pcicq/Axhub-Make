# ECharts 折线图
## 1. 简要概述

ECharts 折线图组件是一个基于 Apache ECharts 的数据可视化元素，用于展示时间序列数据或趋势变化。该组件演示了如何在 Axhub 中集成第三方图表库，并提供了完整的配置和交互能力。

**核心能力：**
- 基于 ECharts 的高性能折线图渲染
- 支持多系列数据展示
- 丰富的交互功能（缩放、图例选择等）
- 完全可配置的外观和行为
- 响应式图表尺寸调整

## 2. 业务需求

### 业务背景
在数据分析和可视化场景中，折线图是最常用的图表类型之一。该组件作为 Axhub 平台的示例，展示了如何正确集成和使用第三方可视化库（ECharts），并遵循 Axhub 组件开发规范。

### 用户需求
- 用户需要直观地查看数据趋势和变化
- 用户可以通过交互（悬停、点击、缩放）深入了解数据
- 用户可以自定义图表的外观（颜色、标题、坐标轴等）
- 用户可以动态更新图表数据
- 用户可以控制图表的显示状态（加载动画等）

### 业务流程
1. 组件初始化时，根据配置项和数据源渲染图表
2. 用户可以通过鼠标交互查看详细数据
3. 用户可以通过图例控制系列的显示/隐藏
4. 外部系统可以通过动作更新图表数据或控制加载状态

### 业务规则
- 图表必须直接挂载到 `container` DOM 元素上
- 组件卸载时必须销毁 ECharts 实例，避免内存泄漏
- 数据更新时使用增量更新策略，提高性能
- 支持按需加载 ECharts 组件，减小打包体积
组件通过 `container` 属性直接渲染到 DOM，不返回 JSX 元素。图表由以下部分组成：
1. **标题区域**：显示图表标题
2. **图例区域**：显示系列名称，支持点击切换显示
3. **绘图区域**：主要的折线图绘制区域
4. **坐标轴**：X 轴和 Y 轴，可配置名称
5. **提示框**：鼠标悬停时显示数据详情

### 内容类型
- 图表标题（可配置）
- X 轴标签数据（来自数据源）
- Y 轴数值数据（来自数据源）
- 系列名称（来自数据源）
- 坐标轴名称（可配置）

### 布局和样式
- 图表自动填充 `container` 容器
- 支持响应式尺寸调整
- 主题色可通过配置项自定义
- 多系列使用不同颜色区分（自动分配）
- 平滑曲线效果，提升视觉体验

### 交互行为
1. **鼠标悬停**：
   - 显示提示框，展示当前数据点的详细信息
   - 高亮当前数据点

2. **点击图表**：
   - 触发 `onClick` 事件，传递点击位置的数据信息

3. **数据缩放**：
   - 触发 `onDataZoom` 事件，传递缩放范围信息

4. **图例选择**：
   - 点击图例可显示/隐藏对应系列
   - 触发 `onLegendSelect` 事件，传递选择状态

5. **动作调用**：
   - `updateData`：动态更新图表数据
   - `resize`：手动触发图表尺寸重新计算
   - `showLoading` / `hideLoading`：控制加载动画

### 状态变化
- `chart_instance`：ECharts 实例对象，用于高级操作
- `current_data`：当前图表数据，包含系列和 X 轴数据
## 4. Axure API 说明

### 事件列表
| 事件名 | 描述 | 触发时机 | 参数 |
|--------|------|----------|------|
| `onClick` | 点击图表时触发 | 点击图表任意位置时 | ECharts 事件参数对象 |
| `onDataZoom` | 数据缩放时触发 | 用户缩放图表数据范围时 | ECharts 缩放事件参数 |
| `onLegendSelect` | 图例选择时触发 | 点击图例切换系列显示时 | ECharts 图例选择事件参数 |

### 动作列表
| 动作名 | 描述 | 参数 |
|--------|------|------|
| `updateData` | 更新图表数据 | `{ series: Array, xAxis: { data: Array } }` - 新的系列和 X 轴数据 |
| `resize` | 调整图表大小 | 无 |
| `showLoading` | 显示加载动画 | 无 |
| `hideLoading` | 隐藏加载动画 | 无 |

### 变量列表
| 变量名 | 类型 | 描述 |
|--------|------|------|
| `chart_instance` | `EChartsInstance` | ECharts 实例对象，可用于高级操作 |
| `current_data` | `object` | 当前图表数据，包含 series 和 xAxis |

### 配置项列表
| 配置项ID | 类型 | 显示名称 | 说明 | 默认值 |
|----------|------|----------|------|--------|
| `title` | `input` | 图表标题 | 显示在图表顶部的标题文本 | `'折线图'` |
| `xAxisName` | `input` | X轴名称 | X轴的标签名称 | `'X轴'` |
| `yAxisName` | `input` | Y轴名称 | Y轴的标签名称 | `'Y轴'` |
| `primaryColor` | `colorPicker` | 主题色 | 图表的主色调 | `'#1890ff'` |
| `showLegend` | `checkbox` | 显示图例 | 是否显示图例 | `true` |
| `showTooltip` | `checkbox` | 显示提示框 | 是否显示鼠标悬停提示 | `true` |

### 数据项列表
| 数据项名称 | 描述 | 数据结构 |
|-----------|------|----------|
| `series` | 折线图系列数据 | `Array<{ name: string, data: number[] }>` |
| `xAxis` | X轴数据 | `{ data: string[] }` |

**series 字段说明：**
- `name` (string)：系列名称，显示在图例中
- `data` (number[])：数据数组，每个元素对应 X 轴的一个点

**xAxis 字段说明：**
- `data` (string[])：X 轴标签数组，与系列数据一一对应

**数据示例：**
```json
{
  "series": [
    { "name": "系列1", "data": [120, 132, 101, 134, 90, 230, 210] },
    { "name": "系列2", "data": [220, 182, 191, 234, 290, 330, 310] }
  ],
  "xAxis": {
    "data": ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]
  }
}
```
