import{l as b}from"./snapdom-UpHUtlIF.js";import"./dev-template-bootstrap.js";import"./useId-DVWwlul7.js";import"./AntdIcon-D2RC5D7Y.js";import"./index-BpI3bt2c.js";import"./clsx-CC_C3iKL.js";import"./CopyOutlined-Dm8N-_T-.js";function C(e){return typeof e=="string"&&/^data:image\/svg\+xml/i.test(e)}function M(e){let n=e.indexOf(",");return n>=0?decodeURIComponent(e.slice(n+1)):""}function v(e){return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e)}`}function F(e){let n=[],t="",i=0;for(let o=0;o<e.length;o++){let r=e[o];r==="("&&i++,r===")"&&(i=Math.max(0,i-1)),r===";"&&i===0?(n.push(t),t=""):t+=r}return t.trim()&&n.push(t),n.map(o=>o.trim()).filter(Boolean)}function k(e){let n=[],t="",i=0;for(let r=0;r<e.length;r++){let s=e[r];s==="("&&i++,s===")"&&(i=Math.max(0,i-1)),s===","&&i===0?(n.push(t.trim()),t=""):t+=s}t.trim()&&n.push(t.trim());let o=[];for(let r of n){if(/\binset\b/i.test(r))continue;let s=r.match(/-?\d+(?:\.\d+)?px/gi)||[],[l="0px",a="0px",p="0px"]=s,u=r.replace(/-?\d+(?:\.\d+)?px/gi,"").replace(/\binset\b/ig,"").trim().replace(/\s{2,}/g," "),d=!!u&&u!==",";o.push(`drop-shadow(${l} ${a} ${p}${d?` ${u}`:""})`)}return o.join(" ")}function y(e){let n=F(e),t=null,i=null,o=null,r=[];for(let l of n){let a=l.indexOf(":");if(a<0)continue;let p=l.slice(0,a).trim().toLowerCase(),u=l.slice(a+1).trim();p==="box-shadow"?o=u:p==="filter"?t=u:p==="-webkit-filter"?i=u:r.push([p,u])}if(o){let l=k(o);l&&(t=t?`${t} ${l}`:l,i=i?`${i} ${l}`:l)}let s=[...r];return t&&s.push(["filter",t]),i&&s.push(["-webkit-filter",i]),s.map(([l,a])=>`${l}:${a}`).join(";")}function I(e){return e.replace(/([^{}]+)\{([^}]*)\}/g,(n,t,i)=>`${t}{${y(i)}}`)}function N(e){return e=e.replace(/<style[^>]*>([\s\S]*?)<\/style>/gi,(n,t)=>n.replace(t,I(t))),e=e.replace(/style=(['"])([\s\S]*?)\1/gi,(n,t,i)=>`style=${t}${y(i)}${t}`),e}function S(e){if(!b()||!C(e))return e;try{let n=M(e),t=N(n);return v(t)}catch{return e}}async function D(e,n){let{width:t,height:i,scale:o=1,dpr:r=1,meta:s={},backgroundColor:l}=n;e=S(e);let a=new Image;a.loading="eager",a.decoding="sync",a.crossOrigin="anonymous",a.src=e,await a.decode();let p=a.naturalWidth,u=a.naturalHeight,d=Number.isFinite(s.w0)?s.w0:p,x=Number.isFinite(s.h0)?s.h0:u,c,m,$=Number.isFinite(t),w=Number.isFinite(i);if($&&w)c=Math.max(1,t),m=Math.max(1,i);else if($){let g=t/Math.max(1,d);c=t,m=x*g}else if(w){let g=i/Math.max(1,x);m=i,c=d*g}else c=p,m=u;c=c*o,m=m*o;let f=document.createElement("canvas");f.width=c*r,f.height=m*r,f.style.width=`${c}px`,f.style.height=`${m}px`;let h=f.getContext("2d");return r!==1&&h.scale(r,r),l&&(h.save(),h.fillStyle=l,h.fillRect(0,0,c,m),h.restore()),h.drawImage(a,0,0,c,m),f}export{D as toCanvas};
