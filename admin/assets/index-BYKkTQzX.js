import{u as $,b as f,C as G,g as N,r as C,d as M,_ as W,e as k,f as A}from"./ContextIsolator-CZbyGjpy.js";import{u as D,P as H,w as E,a as V,b as B,c as Q,C as T,F as U,d as Y,r as z,M as q,e as J,f as y,g as K,h as L,i as X,j as Z,k as F,m as ee,l as ne}from"./index-Cc4Rpr2U.js";import{w as se}from"./AntdIcon-Cx9CBJxt.js";let a=null,d=e=>e(),b=[],h={};function j(){const{getContainer:e,duration:n,rtl:r,maxCount:t,top:s}=h,o=(e==null?void 0:e())||document.body;return{getContainer:()=>o,duration:n,rtl:r,maxCount:t,top:s}}const te=f.forwardRef((e,n)=>{const{messageConfig:r,sync:t}=e,{getPrefixCls:s}=C.useContext(M),o=h.prefixCls||s("message"),u=C.useContext(V),[c,p]=B(Object.assign(Object.assign(Object.assign({},r),{prefixCls:o}),u.message));return f.useImperativeHandle(n,()=>{const i=Object.assign({},c);return Object.keys(i).forEach(m=>{i[m]=(...x)=>(t(),c[m].apply(c,x))}),{instance:i,sync:t}}),p}),oe=f.forwardRef((e,n)=>{const[r,t]=f.useState(j),s=()=>{t(j)};f.useEffect(s,[]);const o=N(),u=o.getRootPrefixCls(),c=o.getIconPrefixCls(),p=o.getTheme(),i=f.createElement(te,{ref:n,sync:s,messageConfig:r});return f.createElement(G,{prefixCls:u,iconPrefixCls:c,theme:p},o.holderRender?o.holderRender(i):i)}),P=()=>{if(!a){const e=document.createDocumentFragment(),n={fragment:e};a=n,d(()=>{$()(f.createElement(oe,{ref:t=>{const{instance:s,sync:o}=t||{};Promise.resolve().then(()=>{!n.instance&&s&&(n.instance=s,n.sync=o,P())})}}),e)});return}a.instance&&(b.forEach(e=>{const{type:n,skipped:r}=e;if(!r)switch(n){case"open":{d(()=>{const t=a.instance.open(Object.assign(Object.assign({},h),e.config));t==null||t.then(e.resolve),e.setCloseFn(t)});break}case"destroy":d(()=>{a==null||a.instance.destroy(e.key)});break;default:d(()=>{var t;const s=(t=a.instance)[n].apply(t,W(e.args));s==null||s.then(e.resolve),e.setCloseFn(s)})}}),b=[])};function re(e){h=Object.assign(Object.assign({},h),e),d(()=>{var n;(n=a==null?void 0:a.sync)===null||n===void 0||n.call(a)})}function ae(e){const n=E(r=>{let t;const s={type:"open",config:e,resolve:r,setCloseFn:o=>{t=o}};return b.push(s),()=>{t?d(()=>{t()}):s.skipped=!0}});return P(),n}function le(e,n){const r=E(t=>{let s;const o={type:e,args:n,resolve:t,setCloseFn:u=>{s=u}};return b.push(o),()=>{s?d(()=>{s()}):o.skipped=!0}});return P(),r}const ce=e=>{b.push({type:"destroy",key:e}),P()},ie=["success","info","warning","error","loading"],fe={open:ae,destroy:ce,config:re,useMessage:D,_InternalPanelDoNotUseOrYouWillBeFired:H},ue=fe;ie.forEach(e=>{ue[e]=(...n)=>le(e,n)});var de=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)n.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(r[t[s]]=e[t[s]]);return r};const ge=e=>{const{prefixCls:n,className:r,closeIcon:t,closable:s,type:o,title:u,children:c,footer:p}=e,i=de(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:m}=C.useContext(M),x=m(),g=n||m("modal"),w=k(x),[S,_,R]=Q(g,w),v=`${g}-confirm`;let O={};return o?O={closable:s??!1,title:"",footer:"",children:C.createElement(T,Object.assign({},e,{prefixCls:g,confirmPrefixCls:v,rootPrefixCls:x,content:c}))}:O={closable:s??!0,title:u,footer:p!==null&&C.createElement(U,Object.assign({},e)),children:c},S(C.createElement(Y,Object.assign({prefixCls:g,className:A(_,`${g}-pure-panel`,o&&v,o&&`${v}-${o}`,r,R,w)},i,{closeIcon:z(g,t),closable:s},O)))},Ce=se(ge);function I(e){return y(ne(e))}const l=q;l.useModal=J;l.info=function(n){return y(K(n))};l.success=function(n){return y(L(n))};l.error=function(n){return y(X(n))};l.warning=I;l.warn=I;l.confirm=function(n){return y(Z(n))};l.destroyAll=function(){for(;F.length;){const n=F.pop();n&&n()}};l.config=ee;l._InternalPanelDoNotUseOrYouWillBeFired=Ce;export{l as M,ue as s};
