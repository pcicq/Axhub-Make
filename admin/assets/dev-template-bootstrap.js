const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B9Wl0nB5.js","assets/Skeleton-DI2ZGUd8.js","assets/CopyOutlined-DLLCC9rw.js","assets/index-BfwSyDzQ.js","assets/useVariants-Bb08OOGU.js"])))=>i.map(i=>d[i]);
import{r as N,c as X,b as k,R as K,a as Q}from"./Skeleton-DI2ZGUd8.js";import{I as ee,s as L,M as Y,T as te,S as V,R as oe}from"./CopyOutlined-DLLCC9rw.js";import{A as Z,B as H}from"./index-BfwSyDzQ.js";import{j as x}from"./useVariants-Bb08OOGU.js";var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};function B(){return B=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(o[h]=a[h])}return o},B.apply(this,arguments)}const se=(o,n)=>N.createElement(ee,B({},o,{ref:n,icon:ne})),ae=N.forwardRef(se),re="modulepreload",ce=function(o){return"/"+o},q={},z=function(n,a,h){let b=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),p=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));b=Promise.allSettled(a.map(m=>{if(m=ce(m),m in q)return;q[m]=!0;const A=m.endsWith(".css"),w=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const f=document.createElement("link");if(f.rel=A?"stylesheet":re,A||(f.as="script"),f.crossOrigin="",f.href=m,p&&f.setAttribute("nonce",p),document.head.appendChild(f),A)return new Promise((I,e)=>{f.addEventListener("load",I),f.addEventListener("error",()=>e(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(t){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=t,window.dispatchEvent(p),!p.defaultPrevented)throw t}return b.then(t=>{for(const p of t||[])p.status==="rejected"&&l(p.reason);return n().catch(l)})},U=o=>{if(typeof window>"u")return Promise.resolve(!0);const n=o.getContainer??document.body,a=document.createElement("div");n.appendChild(a);const h=X.createRoot(a);return new Promise(b=>{const l=p=>{b(p),setTimeout(()=>{h.unmount(),a.remove()},0)},t=()=>k.createElement(Z,null,k.createElement(Y,{open:!0,title:o.title??"操作确认",okText:o.okText??"确定",cancelText:o.cancelText??"取消",maskClosable:!1,centered:!0,onOk:()=>l(!0),onCancel:()=>l(!1),destroyOnClose:!0},k.createElement("div",{style:{whiteSpace:"pre-line"}},o.content)));h.render(k.createElement(t))})};let F=null;const W=o=>{if(!o)return o;let n=o.replace(/body\s*>\s*#root\s*>\s*div\.css-[\w-]+\s*\.ant-app\s*>?/gi,"");return n=n.replace(/div\.css-[\w-]+\s*\.ant-app\s*>?/gi,""),n=n.replace(/>\s*/g,">").replace(/\s{2,}/g," ").trim(),n.startsWith(">")&&(n=n.slice(1).trim()),n},le=()=>{if(F||typeof document>"u")return;const o=document.createElement("div");o.id="inspecta-start-overlay",o.style.cssText=`
    position: fixed;
    inset: 0;
    z-index: 2147483646;
    background: rgba(0,0,0,0.85);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 24px;
    gap: 14px;
    box-sizing: border-box;
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;
    text-align: center;
  `;const n=document.createElement("div");n.style.cssText=`
    max-width: 640px;
    width: 100%;
    padding: 0;
    margin: 0 auto;
    text-align: left;
  `;const a=document.createElement("div");a.textContent="Inspecta 模式启动指引",a.style.cssText=`
    font-size: 22px;
    font-weight: 600;
    letter-spacing: 0.2px;
    margin-bottom: 24px;
  `;const h=document.createElement("ul");h.style.cssText=`
    list-style: none;
    margin: 0;
    display: grid;
    gap: 10px;
    font-size: 15px;
    line-height: 1.6;
    text-align: left;
    max-width: 560px;
  `,[()=>{const l=document.createElement("li");l.style.cssText="display: flex; gap: 6px; flex-wrap: wrap;",l.append("1. 安装 Inspecta 扩展 ");const t=document.createElement("a");return t.href="https://inspecta.design/",t.target="_blank",t.rel="noreferrer",t.textContent="https://inspecta.design/",t.style.cssText="color: #8ec7ff; text-decoration: underline; font-weight: 600;",l.appendChild(t),l},()=>{const l=document.createElement("li");return l.textContent="2. 点击 Inspecta 扩展按钮开启页面编辑",l},()=>{const l=document.createElement("li");return l.textContent="3. 编辑后可以让 AI 修改或者保存到强制样式",l}].forEach(l=>{h.appendChild(l())}),n.appendChild(a),n.appendChild(h),o.appendChild(n),document.body.appendChild(o),F=o},$=()=>{F&&(F.remove(),F=null)},ie=o=>{if(typeof window>"u"||!o)return;console.log("[Dev Template] Inspecta 模式已启用"),console.log("[Inspecta-Translator] 启动翻译脚本..."),le();const n={Settings:"设置",Cancel:"取消","Show changes":"显示更改",Overview:"概览",Properties:"属性","Open Projects":"打开项目","User Account & Settings":"用户账户和设置","Click any element to edit it's properties":"点击任意元素以编辑其属性",Colors:"颜色","Validate implemented colors":"验证已实现的颜色","Open the Figma to inspecta plugin and click 'Copy page colors'":"打开 Figma 到 inspecta 插件并点击「复制页面颜色」","Once styles are copied, click 'Paste & compare Figma colors'":"样式复制后，点击「粘贴并比较 Figma 颜色」","Paste & compare Figma colors":"粘贴并比较 Figma 颜色","Page colors":"页面颜色","Grid view":"网格视图","List view":"列表视图","Background colors":"背景颜色","Text colors":"文本颜色","Border colors":"边框颜色",Fonts:"字体","Validate implemented fonts":"验证已实现的字体","Open the Figma to inspecta plugin and click 'Copy page fonts'":"打开 Figma 到 inspecta 插件并点击「复制页面字体」","Once styles are copied, click 'Paste & compare Figma fonts'":"样式复制后，点击「粘贴并比较 Figma 字体」","Paste & compare Figma fonts":"粘贴并比较 Figma 字体","Text content":"文本内容","Copy to AI":"复制到 AI","Send to Cursor":"发送到 Cursor","Reset text content":"重置文本内容",IMG:"图片","Placeholder image":"占位图片",Upload:"上传",Download:"下载","Auto (Webpage Default)":"自动（网页默认）",Fill:"填充",Cover:"覆盖",Contain:"包含",None:"无","Scale Down":"缩小",SVG:"SVG","SVG code will appear here...":"SVG 代码将显示在这里...","Upload SVG file":"上传 SVG 文件","Paste inline SVG code":"粘贴内联 SVG 代码","Download SVG as HTML":"下载 SVG 为 HTML","Copy SVG code":"复制 SVG 代码","Reset SVG to original":"重置 SVG 为原始状态",Layout:"布局",Display:"显示","Flex-setings":"Flex 设置",Direction:"方向",Align:"对齐",Justify:"对齐方式",Wrap:"换行",Gap:"间距",Size:"尺寸",Min:"最小",Max:"最大",W:"宽",H:"高","Min-W":"最小宽","Min-H":"最小高","Max-W":"最大宽","Max-H":"最大高",Background:"背景","Background Color":"背景颜色",Typography:"排版","Font Family":"字体族","Font Weight":"字重","Thin : 100":"细体 : 100","Extra Light : 200":"超细 : 200","Light : 300":"轻 : 300","Regular : 400":"常规 : 400","Medium : 500":"中等 : 500","Semi Bold : 600":"半粗 : 600","Bold : 700":"粗体 : 700","Extra Bold : 800":"超粗 : 800","Black : 900":"黑体 : 900","Font Size":"字体大小","Font Color":"字体颜色","Line Height":"行高","Letter Spacing":"字间距","Text Align":"文本对齐","Text Decoration":"文本装饰",Spacing:"间距",MARGIN:"外边距",PADDING:"内边距",Border:"边框","Border Type":"边框类型","Border Color":"边框颜色","Border Width":"边框宽度",Mixed:"混合","Border-radius (Corners)":"边框圆角（角）",Position:"位置","Position type":"位置类型",Static:"静态",Absolute:"绝对",Fixed:"固定",Relative:"相对",Sticky:"粘性","Z-Index":"层级","Relative to:":"相对于：",Parent:"父元素",Body:"主体","Box shadow":"盒子阴影",Opacity:"透明度","No changes":"无更改","1 change":"1 个更改",changes:"个更改","Export to File":"导出到文件","Copy All Changes":"复制所有更改","Copy All Changes to AI":"复制所有更改到 AI","Delete All Changes":"删除所有更改",Share:"分享","Share Changes":"分享更改","AI agent bridge":"AI 代理桥接",Disconnected:"已断开连接",Connected:"已连接","Connecting...":"连接中...","AI agent:":"AI 代理：","Cursor IDE":"Cursor IDE","GitHub Copilot":"GitHub Copilot","Setup guide":"设置指南","No CSS changes":"无 CSS 更改","Send CSS changes to Cursor (Localhost)":"发送 CSS 更改到 Cursor（本地主机）","Download the Cursor extension":"下载 Cursor 扩展","Install the extension on Cursor IDE:":"在 Cursor IDE 上安装扩展：","Press Cmd + Shift + P (on Mac) or Ctrl + Shift + P (on Windows/Linux).":"按 Cmd + Shift + P（Mac）或 Ctrl + Shift + P（Windows/Linux）。",'Type "Install from VSIX..." and select the':"输入「从 VSIX 安装...」并选择","Once installed, click to open inspecta server on your IDE bottom toolbar":"安装后，点击 IDE 底部工具栏上的 inspecta 服务器以打开","Inspecta: Closed (click to Open)":"Inspecta: 已关闭（点击打开）",'On inspecta, make CSS changes and click "Send to Cursor" from the element toolbar or from css changes panel.':"在 inspecta 中，进行 CSS 更改，然后从元素工具栏或 CSS 更改面板点击「发送到 Cursor」。",properties:"属性",Overlay:"叠加层",Changes:"更改","Image overlay":"图片叠加层","No image":"无图片","Paste Image from clipboard":"从剪贴板粘贴图片","Upload Image":"上传图片","Upload image or paste from clipboard":"上传图片或从剪贴板粘贴",Navigator:"导航器","Collapse All":"全部折叠","Close Inspecta":"关闭 Inspecta","Clear inspecta changes":"清除 inspecta 更改","Show spacing overlays":"显示间距叠加层","Download inspecta Figma plugin":"下载 inspecta Figma 插件",Theme:"主题","Give us a feedback":"给我们反馈","Toggle Distances":"切换距离","Toggle Info Popover":"切换信息弹出框","Toggle Rulers":"切换标尺","Toggle Outlines":"切换轮廓","Sample Color":"采样颜色","Toggle Image Overlay":"切换图片叠加层","Toggle Navigator":"切换导航器","Toggle Changes Panel":"切换更改面板","Toggle Properties Panel":"切换属性面板","Switch to Light Theme":"切换到浅色主题","Switch to Dark Theme":"切换到深色主题","Reset Panel Position":"重置面板位置","Toggle Inspect Mode Off":"关闭检查模式","Toggle Inspect Mode On":"打开检查模式","Collapse Panel":"折叠面板","Expand Panel":"展开面板","Collapse All ":"全部折叠 ","Expand All":"全部展开","Isolate element":"隔离元素","Paste Figma Style":"粘贴 Figma 样式","Paste from clipboard":"从剪贴板粘贴",Copied:"已复制","Apply styles to":"应用样式到","Selected element":"选中的元素",Class:"类","Pasted Styles":"粘贴的样式",Preview:"预览","New or updated":"新建或已更新","Reset (to be removed in production)":"重置（将在生产环境中移除）","Similar (unchanged)":"相似（未更改）",Apply:"应用",Delete:"删除","Global color change":"全局颜色更改","Global font change":"全局字体更改","Original:":"原始：","New:":"新建：","No fonts found":"未找到字体","Center element":"居中元素","Reset Position":"重置位置","Auto fix colors":"自动修复颜色","Auto fix fonts":"自动修复字体","Send to IDE only works on localhost":"发送到 IDE 仅在本地主机上工作","Send to Cursor IDE":"发送到 Cursor IDE","Send to GitHub Copilot":"发送到 GitHub Copilot","Copy for AI":"复制到 AI","Icon & SVG colors":"图标和 SVG 颜色",Unknown:"未知",Normal:"正常",Color:"颜色","Solid Color":"纯色",Gradient:"渐变","Background Image":"背景图片",Custom:"自定义",Figma:"Figma",Variables:"变量","No Figma colors available. Paste Figma colors from the overview panel first.":"没有可用的 Figma 颜色。请先从概览面板粘贴 Figma 颜色。","No CSS variables available.":"没有可用的 CSS 变量。",Hover:"悬停",Outline:"轮廓","Select font...":"选择字体..."},a=new WeakSet,h=e=>{const r=e.trim();return n[r]||null},b=e=>{if(a.has(e))return!1;let r=!1;if(e.nodeType===Node.TEXT_NODE&&e.textContent){const c=h(e.textContent);c&&c!==e.textContent&&(e.textContent=c,r=!0)}if(e.nodeType===Node.ELEMENT_NODE){const c=e;Array.from(c.attributes).forEach(i=>{const s=h(i.value);s&&s!==i.value&&(c.setAttribute(i.name,s),r=!0)})}return r&&a.add(e),r},l=e=>{const r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT);let c;for(;c=r.nextNode();)b(c)},t=e=>{console.log("[Inspecta-Translator] 开始初始翻译"),l(e),console.log("[Inspecta-Translator] 初始翻译完成");let r=null;const c=new Set;new MutationObserver(s=>{s.forEach(u=>{u.type==="childList"?u.addedNodes.forEach(d=>{(d.nodeType===Node.ELEMENT_NODE||d.nodeType===Node.TEXT_NODE)&&c.add(d)}):u.type==="characterData"&&c.add(u.target)}),r!==null&&clearTimeout(r),r=window.setTimeout(()=>{c.size>0&&(c.forEach(u=>{u.nodeType===Node.ELEMENT_NODE?l(u):b(u)}),c.clear()),r=null},50)}).observe(e,{childList:!0,subtree:!0,characterData:!0,attributes:!1}),console.log("[Inspecta-Translator] 翻译观察器已启动")},p=e=>{console.log("[Axhub] 开始获取 CSS 内容");const r=e.querySelector("#btn_toggle_changes");return r?(r.click(),console.log("[Axhub] 已点击打开 CSS 变化面板"),setTimeout(()=>{const c=e.querySelector("#full_css_content");if(!c){console.error("[Axhub] 未找到 #full_css_content 元素");return}console.log("[Axhub] 找到 CSS 内容容器:",c);const i=c.querySelectorAll(".change_item");console.log(`[Axhub] 找到 ${i.length} 个 change_item`);const s=[];i.forEach((d,g)=>{const S=d.querySelector(".inspecta_tag_input");if(!S){console.warn(`[Axhub] change_item ${g} 未找到 .inspecta_tag_input`);return}const P=S.getAttribute("rule"),C=W(P||"");if(!C){console.warn(`[Axhub] change_item ${g} 的 rule 属性为空`);return}console.log(`[Axhub] change_item ${g} - rule: ${C}`);const _=d.querySelectorAll(".css_change_property");console.log(`[Axhub] change_item ${g} - 找到 ${_.length} 个属性`);const y=[];if(_.forEach((v,T)=>{const O=v.querySelector("input[type='checkbox']");if(!O){console.warn(`[Axhub] change_item ${g} - 属性 ${T} 未找到 checkbox`);return}const E=O.getAttribute("key"),D=O.getAttribute("cssvalue");E&&D?(y.push(`  ${E}: ${D};`),console.log(`[Axhub] change_item ${g} - 属性 ${T}: ${E}: ${D}`)):console.warn(`[Axhub] change_item ${g} - 属性 ${T} 缺少 key 或 cssvalue`)}),y.length>0){const v=`${C} {
${y.join(`
`)}
}`;s.push(v),console.log(`[Axhub] change_item ${g} - 生成 CSS 规则:
${v}`)}});const u=s.join(`

`);return console.log(`[Axhub] 最终生成的 CSS (${s.length} 条规则):
${u}`),u},300),""):(console.error("[Axhub] 未找到 #btn_toggle_changes 按钮"),"")},m=async e=>{console.log("[Axhub] 开始保存 hack.css"),p(e),setTimeout(async()=>{const r=e.querySelector("#full_css_content");if(!r){console.warn("[Axhub] 未找到 CSS 内容");return}const c=r.querySelectorAll(".change_item"),i=[];c.forEach(C=>{const _=C.querySelector(".inspecta_tag_input"),y=W((_==null?void 0:_.getAttribute("rule"))||"");if(!y)return;const v=C.querySelectorAll(".css_change_property"),T=[];v.forEach(O=>{const E=O.querySelector("input[type='checkbox']"),D=E==null?void 0:E.getAttribute("key"),G=E==null?void 0:E.getAttribute("cssvalue");D&&G&&T.push(`  ${D}: ${G};`)}),T.length>0&&i.push(`${y} {
${T.join(`
`)}
}`)});const s=i.join(`

`);if(!s){console.warn("[Axhub] 没有可保存的 CSS 内容"),L.warning("当前没有可保存的 CSS 更改");return}console.log(`[Axhub] 准备保存的 CSS 内容:
`,s);const u=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(!u){console.error("[Axhub] 无法识别当前页面路径");return}const[,d,g]=u,S=`${d}/${g}`;if(console.log("[Axhub] 目标路径:",S),!await U({title:"更新强制样式",content:`确定要更新强制样式吗？

此操作会将当前的 CSS 修改保存到 hack.css 文件，
页面将自动热更新刷新以应用更改。`,okText:"更新",cancelText:"取消"})){console.log("[Axhub] 用户取消了保存操作");return}try{const C=await fetch("/api/hack-css/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:S,content:s})}),_=await C.json();C.ok?console.log("[Axhub] ✅ 保存成功:",_):console.error("[Axhub] ❌ 保存失败:",_)}catch(C){console.error("[Axhub] ❌ 请求失败:",C)}},500)},A=async e=>{console.log("[Axhub] ========== 开始清空 hack.css =========="),console.log("[Axhub] 当前 URL:",window.location.href),console.log("[Axhub] 当前 pathname:",window.location.pathname);const r=window.location.pathname.match(/\/(elements|pages)\/([^\/]+)/);if(console.log("[Axhub] 路径匹配结果:",r),!r){console.error("[Axhub] ❌ 无法识别当前页面路径:",window.location.pathname);return}const[,c,i]=r,s=`${c}/${i}`;if(console.log("[Axhub] 解析结果 - type:",c,"name:",i),console.log("[Axhub] 目标路径:",s),!await U({title:"清空强制样式",content:`确定要清空强制样式吗？

此操作会删除 hack.css 文件并清空所有 Inspecta 修改，
页面将自动热更新刷新以应用更改。`,okText:"清空",cancelText:"取消"})){console.log("[Axhub] 用户取消了清空操作");return}const d={path:s};console.log("[Axhub] 请求体:",JSON.stringify(d)),console.log("[Axhub] 准备发送 POST 请求到: /api/hack-css/clear");try{const g=await fetch("/api/hack-css/clear",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});console.log("[Axhub] ✅ 收到响应"),console.log("[Axhub] 响应状态:",g.status,g.statusText),console.log("[Axhub] 响应头:",Object.fromEntries(g.headers.entries()));const S=await g.json();if(console.log("[Axhub] 响应内容:",S),g.ok){console.log("[Axhub] ✅ 清空成功:",S);const P=e.querySelector("#btn_clear_inspecta_changes");P?(console.log("[Axhub] 找到清空 inspecta 按钮，准备点击"),P.click(),console.log("[Axhub] 已点击清空 inspecta 按钮")):console.warn("[Axhub] 未找到 #btn_clear_inspecta_changes 按钮"),console.log("[Axhub] 等待页面自动热更新...")}else console.error("[Axhub] ❌ 清空失败:",S)}catch(g){console.error("[Axhub] ❌ 请求异常:",g),console.error("[Axhub] 错误堆栈:",g instanceof Error?g.stack:"无堆栈信息")}console.log("[Axhub] ========== 清空流程结束 ==========")},w=e=>{console.log("[Inspecta-Custom] 开始注入自定义按钮");const r=()=>{var _;const c=e.querySelector("#btn_settings");if(!c){console.log("[Inspecta-Custom] 设置按钮未找到，继续等待..."),setTimeout(r,100);return}if(console.log("[Inspecta-Custom] 找到设置按钮:",c),e.querySelector("#btn_axhub_action")){console.log("[Inspecta-Custom] 自定义按钮已存在，跳过注入");return}const i=document.createElement("div");i.className="btn-outer btn_axhub_action",i.id="btn_axhub_action",i.title="Axhub 功能",i.innerHTML=`
        <span class="btn-text">A</span>
        <div class="tooltip tooltip-top" style="opacity: 0;">Axhub 功能</div>
      `;const s=document.createElement("div");s.id="axhub_menu",s.className="popup",s.innerHTML=`
        <div class="popup-header">
          <div class="popup-title">Axhub 功能</div>
          <div class="popup-elements-count"></div>
          <div class="action_icon" id="btn_axhub_close">
            <svg class="icon-16 icon-fill"><use href="#ic_close"></use></svg>
          </div>
        </div>
        <div class="settings-menu-container">
          <div class="settings-menu-item" id="btn_axhub_save">
            <div class="settings-menu-text">保存到强制样式</div>
          </div>
          <div class="settings-menu-item" id="btn_axhub_clear">
            <div class="settings-menu-text">清空强制样式</div>
          </div>
        </div>
      `;const u=document.createElement("style");u.textContent=`
        #bottom_toolbar .btn_axhub_action {
          position: absolute;
          top: 50%;
          right: -40px;
          transform: translateY(-50%);
          color:#666;
        }
        #bottom_toolbar .btn_axhub_action:hover {
          background-color: #eaeaea;
        }
        #bottom_toolbar .btn_axhub_action .btn-text {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 16px;
          height: 16px;
          font-size: 14px;
          font-weight: bold;
          color: currentColor;
        }
        #bottom_toolbar .btn_settings {
          right: -80px !important;
        }
        #bottom_toolbar .btn_remove_inspecta {
          right: -120px !important;
        }
        #axhub_menu {
          position: fixed;
          z-index: 2147483647;
          bottom: 60px;
          left: 60%;
          transform: translateX(calc(-50% - 40px));
          opacity: 0;
          transition: opacity 0.2s ease-in-out;
          pointer-events: none;
          width: 280px;
        }
        #axhub_menu.show {
          opacity: 1;
          pointer-events: auto;
        }
      `,e.appendChild(u),(_=c.parentNode)==null||_.insertBefore(i,c);const d=e.querySelector("#settings_menu");d&&d.parentNode?(d.parentNode.insertBefore(s,d.nextSibling),console.log("[Inspecta-Custom] Axhub 菜单已插入到 settings_menu 后面")):(e.appendChild(s),console.log("[Inspecta-Custom] Axhub 菜单已添加到 shadowRoot")),i.addEventListener("click",y=>{y.stopPropagation();const v=s.classList.contains("show"),T=e.querySelector("#settings_menu");T&&T.classList.remove("show"),v?(s.classList.remove("show"),s.style.display="none",console.log("[Inspecta-Custom] Axhub 菜单关闭")):(s.style.display="block",s.classList.add("show"),console.log("[Inspecta-Custom] Axhub 菜单打开"))});const g=s.querySelector("#btn_axhub_close");g==null||g.addEventListener("click",y=>{y.stopPropagation(),s.classList.remove("show"),s.style.display="none",console.log("[Inspecta-Custom] Axhub 菜单关闭（通过关闭按钮）")});const S=s.querySelector("#btn_axhub_save");S==null||S.addEventListener("click",async y=>{y.stopPropagation(),console.log("[Axhub] 保存按钮被点击"),s.classList.remove("show"),s.style.display="none",await m(e)});const P=s.querySelector("#btn_axhub_clear");P==null||P.addEventListener("click",async y=>{y.stopPropagation(),console.log("[Axhub] 清空按钮被点击"),s.classList.remove("show"),s.style.display="none",await A(e)});const C=y=>{const v=y.target;!i.contains(v)&&!s.contains(v)&&(s.classList.remove("show"),s.style.display="none")};e.addEventListener("click",C),console.log("[Inspecta-Custom] 自定义按钮注入成功")};r()},f=()=>{const e=document.querySelector("#inspecta_app_container");if(!e){console.log("[Inspecta-Translator] 容器不存在，等待注入...");return}if(console.log("[Inspecta-Translator] 找到容器:",e),!e.shadowRoot){console.log("[Inspecta-Translator] shadowRoot 不存在，等待创建...");return}console.log("[Inspecta-Translator] 找到 shadowRoot，开始翻译"),t(e.shadowRoot),w(e.shadowRoot),$()};(()=>{console.log("[Inspecta-Translator] 开始监听 Inspecta 容器注入"),f();const e=new MutationObserver(r=>{for(const c of r)c.type==="childList"&&c.addedNodes.forEach(i=>{if(i instanceof Element){if(i.id==="inspecta_app_container"){console.log("[Inspecta-Translator] 检测到 Inspecta 容器注入");const u=()=>{const d=i;d.shadowRoot?(console.log("[Inspecta-Translator] shadowRoot 已创建"),e.disconnect(),t(d.shadowRoot),w(d.shadowRoot),$()):(console.log("[Inspecta-Translator] shadowRoot 尚未创建，继续等待..."),setTimeout(u,100))};u()}const s=i.querySelector("#inspecta_app_container");if(s){console.log("[Inspecta-Translator] 在子节点中检测到 Inspecta 容器");const u=()=>{const d=s;d.shadowRoot?(console.log("[Inspecta-Translator] shadowRoot 已创建"),e.disconnect(),t(d.shadowRoot),w(d.shadowRoot),$()):(console.log("[Inspecta-Translator] shadowRoot 尚未创建，继续等待..."),setTimeout(u,100))};u()}}})});e.observe(document.body,{childList:!0,subtree:!0}),console.log("[Inspecta-Translator] 监听器已启动")})()},{Text:j,Paragraph:R}=te;let M=null;function pe(){const[o,n]=N.useState(!1),[a,h]=N.useState(null);N.useEffect(()=>{M={show:p=>{h(p),n(!0)}},window.showErrorDialog=(p,m)=>{M==null||M.show({message:p,stack:m})}},[]);const b=()=>{n(!1),h(null)},l=()=>{if(!a)return;const p=`错误信息：
${a.message}

堆栈信息：
${a.stack||"无堆栈信息"}`;navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(p).then(()=>{L.success("错误信息已复制到剪贴板")}).catch(()=>{t(p)}):t(p)},t=p=>{const m=document.createElement("textarea");m.value=p,m.style.position="fixed",m.style.opacity="0",document.body.appendChild(m),m.select();try{document.execCommand("copy"),L.success("错误信息已复制到剪贴板")}catch{L.error("复制失败，请手动复制错误信息")}document.body.removeChild(m)};return x.jsx(Y,{title:x.jsxs(V,{children:[x.jsx(ae,{style:{color:"#ff4d4f"}}),x.jsx("span",{children:"运行时错误"})]}),open:o,onCancel:b,footer:x.jsxs(V,{children:[x.jsx(H,{onClick:b,children:"关闭"}),x.jsx(H,{type:"primary",icon:x.jsx(oe,{}),onClick:l,children:"复制错误信息"})]}),width:600,style:{top:100},children:a&&x.jsxs("div",{children:[x.jsx(R,{children:x.jsx(j,{strong:!0,children:"错误信息："})}),x.jsx(R,{style:{marginBottom:16},children:x.jsx(j,{children:a.message})}),a.stack&&x.jsxs(x.Fragment,{children:[x.jsx(R,{children:x.jsx(j,{strong:!0,children:"堆栈信息："})}),x.jsx(R,{children:x.jsx("pre",{style:{background:"#f5f5f5",border:"1px solid #e0e0e0",borderRadius:4,padding:12,fontSize:12,fontFamily:"Monaco, Menlo, Consolas, monospace",color:"#666",overflow:"auto",maxHeight:300,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:a.stack})})]})]})})}function J(o){let n=2166136261;for(let a=0;a<o.length;a++)n^=o.charCodeAt(a),n=Math.imul(n,16777619);return Math.abs(n).toString(36)}function ue(){if(typeof window.__PAGE_FULL_PATH__<"u"){const o=window.__PAGE_FULL_PATH__,n=J(o);return`${o.split("/").slice(-2).join("-").replace(/\.(tsx|jsx|ts|js)$/,"").replace(/[^a-zA-Z0-9-]/g,"-").slice(0,32)}-${n}`}if(typeof window.__PAGE_ID__<"u")return window.__PAGE_ID__;if(typeof window<"u"){const o=window.location.pathname+window.location.search,n=J(o);return`${o.replace(/[^a-zA-Z0-9]/g,"-").replace(/^-+|-+$/g,"").slice(0,32)}-${n}`}return null}function de(o,n){o&&n&&o.setAttribute("data-page-id",n)}function ge(){if(typeof window<"u"){const o=document.getElementById("root");if(o){const n=ue();n&&(de(o,n),console.log("[Stable ID] Root 元素已注入 ID:",n))}}}function he(o,n){const a=document.getElementById("root");if(!a){console.error("[Dev Template] 找不到 #root 元素");return}const b=n||{container:a,config:{},data:{},events:{}};try{X.createRoot(a).render(k.createElement(Z,null,k.createElement(o,b),k.createElement(pe))),console.log("[Dev Template] 组件已渲染"),setTimeout(()=>ge(),0)}catch(l){console.error("[Dev Template] 渲染失败:",l)}}const me={...Q,...K};if(typeof window<"u"){const o=new URLSearchParams(window.location.search),n=o.get("scale"),a=o.get("width"),h=o.get("height"),b=document.getElementById("root");if(b){if(n){const t=parseFloat(n);!isNaN(t)&&t>0&&(b.style.transform=`scale(${t})`,b.style.transformOrigin="top left",console.log(`[Dev Template] 应用缩放比例: ${t}`))}if(a||h){if(a){const t=parseInt(a);!isNaN(t)&&t>0&&(b.style.width=`${t}px`,console.log(`[Dev Template] 设置宽度: ${t}px`))}if(h){const t=parseInt(h);!isNaN(t)&&t>0&&(b.style.height=`${t}px`,console.log(`[Dev Template] 设置高度: ${t}px`))}}}const l=o.get("inspecta")==="true";ie(l),window.DevTemplateBootstrap={renderComponent:he,React:k,ReactDOM:me,inspectaMode:l},console.log("[Dev Template Bootstrap] 已挂载到全局"),window.addEventListener("message",async t=>{var p,m,A;if(t.data&&t.data.type==="CAPTURE_SCREENSHOT"){console.log("[Dev Template] 收到截图请求",t.data);try{const w=await z(()=>import("./index-6sdqbm2o.js"),[]),f=document.getElementById("root");if(f){const I=f.scrollWidth,e=f.scrollHeight,r=await w.toPng(f,{width:I,height:e,pixelRatio:2,skipAutoScale:!0,backgroundColor:"#fff"});window.parent.postMessage({type:"SCREENSHOT_CAPTURED",dataUrl:r,width:I,height:e},"*"),console.log("[Dev Template] 截图成功并发送")}}catch(w){console.error("[Dev Template] 截图失败:",w),window.parent.postMessage({type:"SCREENSHOT_FAILED",error:String(w)},"*")}}if(t.data&&t.data.type==="EXPORT_FIGMA_JSON"){console.log("[Dev Template] 收到 Figma 导出请求",t.data);try{const{htmlToFigma:w}=await z(async()=>{const{htmlToFigma:s}=await import("./index-B9Wl0nB5.js");return{htmlToFigma:s}},__vite__mapDeps([0,1,2,3,4])),f=document.getElementById("root"),I=f==null?void 0:f.getAttribute("data-page-id"),e=f==null?void 0:f.getAttribute("data-component-id"),r=I||e||((p=t.data)==null?void 0:p.widgetId),c=((m=t.data)==null?void 0:m.enableAutoLayout)!==!1,i=await w("#root",{rootName:((A=t.data)==null?void 0:A.rootName)||document.title||"FRAME",widgetId:r,enableAutoLayout:c});window.parent.postMessage({type:"FIGMA_JSON_READY",success:!0,json:i,...I?{pageId:I}:{},...e?{widgetId:e}:r?{widgetId:r}:{}},"*")}catch(w){console.error("[Dev Template] Figma 导出失败:",w),window.parent.postMessage({type:"FIGMA_JSON_READY",success:!1,error:String(w)},"*")}}})}export{z as _};
